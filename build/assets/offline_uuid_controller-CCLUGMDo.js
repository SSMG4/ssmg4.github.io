import{C as E}from"./pulsar-Z0XEwoqe.js";import{a as R}from"./_commonjsHelpers-92s3wAHG.js";var B={exports:{}},w=B.exports,$;function H(){return $||($=1,(function(b){(function(o){function n(t,i){var e=(t&65535)+(i&65535),c=(t>>16)+(i>>16)+(e>>16);return c<<16|e&65535}function l(t,i){return t<<i|t>>>32-i}function d(t,i,e,c,p,T){return n(l(n(n(i,t),n(c,T)),p),e)}function h(t,i,e,c,p,T,v){return d(i&e|~i&c,t,i,p,T,v)}function g(t,i,e,c,p,T,v){return d(i&c|e&~c,t,i,p,T,v)}function f(t,i,e,c,p,T,v){return d(i^e^c,t,i,p,T,v)}function m(t,i,e,c,p,T,v){return d(e^(i|~c),t,i,p,T,v)}function k(t,i){t[i>>5]|=128<<i%32,t[(i+64>>>9<<4)+14]=i;var e,c,p,T,v,r=1732584193,s=-271733879,u=-1732584194,a=271733878;for(e=0;e<t.length;e+=16)c=r,p=s,T=u,v=a,r=h(r,s,u,a,t[e],7,-680876936),a=h(a,r,s,u,t[e+1],12,-389564586),u=h(u,a,r,s,t[e+2],17,606105819),s=h(s,u,a,r,t[e+3],22,-1044525330),r=h(r,s,u,a,t[e+4],7,-176418897),a=h(a,r,s,u,t[e+5],12,1200080426),u=h(u,a,r,s,t[e+6],17,-1473231341),s=h(s,u,a,r,t[e+7],22,-45705983),r=h(r,s,u,a,t[e+8],7,1770035416),a=h(a,r,s,u,t[e+9],12,-1958414417),u=h(u,a,r,s,t[e+10],17,-42063),s=h(s,u,a,r,t[e+11],22,-1990404162),r=h(r,s,u,a,t[e+12],7,1804603682),a=h(a,r,s,u,t[e+13],12,-40341101),u=h(u,a,r,s,t[e+14],17,-1502002290),s=h(s,u,a,r,t[e+15],22,1236535329),r=g(r,s,u,a,t[e+1],5,-165796510),a=g(a,r,s,u,t[e+6],9,-1069501632),u=g(u,a,r,s,t[e+11],14,643717713),s=g(s,u,a,r,t[e],20,-373897302),r=g(r,s,u,a,t[e+5],5,-701558691),a=g(a,r,s,u,t[e+10],9,38016083),u=g(u,a,r,s,t[e+15],14,-660478335),s=g(s,u,a,r,t[e+4],20,-405537848),r=g(r,s,u,a,t[e+9],5,568446438),a=g(a,r,s,u,t[e+14],9,-1019803690),u=g(u,a,r,s,t[e+3],14,-187363961),s=g(s,u,a,r,t[e+8],20,1163531501),r=g(r,s,u,a,t[e+13],5,-1444681467),a=g(a,r,s,u,t[e+2],9,-51403784),u=g(u,a,r,s,t[e+7],14,1735328473),s=g(s,u,a,r,t[e+12],20,-1926607734),r=f(r,s,u,a,t[e+5],4,-378558),a=f(a,r,s,u,t[e+8],11,-2022574463),u=f(u,a,r,s,t[e+11],16,1839030562),s=f(s,u,a,r,t[e+14],23,-35309556),r=f(r,s,u,a,t[e+1],4,-1530992060),a=f(a,r,s,u,t[e+4],11,1272893353),u=f(u,a,r,s,t[e+7],16,-155497632),s=f(s,u,a,r,t[e+10],23,-1094730640),r=f(r,s,u,a,t[e+13],4,681279174),a=f(a,r,s,u,t[e],11,-358537222),u=f(u,a,r,s,t[e+3],16,-722521979),s=f(s,u,a,r,t[e+6],23,76029189),r=f(r,s,u,a,t[e+9],4,-640364487),a=f(a,r,s,u,t[e+12],11,-421815835),u=f(u,a,r,s,t[e+15],16,530742520),s=f(s,u,a,r,t[e+2],23,-995338651),r=m(r,s,u,a,t[e],6,-198630844),a=m(a,r,s,u,t[e+7],10,1126891415),u=m(u,a,r,s,t[e+14],15,-1416354905),s=m(s,u,a,r,t[e+5],21,-57434055),r=m(r,s,u,a,t[e+12],6,1700485571),a=m(a,r,s,u,t[e+3],10,-1894986606),u=m(u,a,r,s,t[e+10],15,-1051523),s=m(s,u,a,r,t[e+1],21,-2054922799),r=m(r,s,u,a,t[e+8],6,1873313359),a=m(a,r,s,u,t[e+15],10,-30611744),u=m(u,a,r,s,t[e+6],15,-1560198380),s=m(s,u,a,r,t[e+13],21,1309151649),r=m(r,s,u,a,t[e+4],6,-145523070),a=m(a,r,s,u,t[e+11],10,-1120210379),u=m(u,a,r,s,t[e+2],15,718787259),s=m(s,u,a,r,t[e+9],21,-343485551),r=n(r,c),s=n(s,p),u=n(u,T),a=n(a,v);return[r,s,u,a]}function L(t){var i,e="",c=t.length*32;for(i=0;i<c;i+=8)e+=String.fromCharCode(t[i>>5]>>>i%32&255);return e}function I(t){var i,e=[];for(e[(t.length>>2)-1]=void 0,i=0;i<e.length;i+=1)e[i]=0;var c=t.length*8;for(i=0;i<c;i+=8)e[i>>5]|=(t.charCodeAt(i/8)&255)<<i%32;return e}function S(t){return L(k(I(t),t.length*8))}function A(t,i){var e,c=I(t),p=[],T=[],v;for(p[15]=T[15]=void 0,c.length>16&&(c=k(c,t.length*8)),e=0;e<16;e+=1)p[e]=c[e]^909522486,T[e]=c[e]^1549556828;return v=k(p.concat(I(i)),512+i.length*8),L(k(T.concat(v),640))}function C(t){var i="0123456789abcdef",e="",c,p;for(p=0;p<t.length;p+=1)c=t.charCodeAt(p),e+=i.charAt(c>>>4&15)+i.charAt(c&15);return e}function y(t){return unescape(encodeURIComponent(t))}function O(t){return S(y(t))}function F(t){return C(O(t))}function M(t,i){return A(y(t),y(i))}function D(t,i){return C(M(t,i))}function U(t,i,e){return i?e?M(i,t):D(i,t):e?O(t):F(t)}b.exports?b.exports=U:o.md5=U})(w)})(B)),B.exports}var V=H();const j=R(V);import.meta.stimulusFetch="lazy";import.meta.stimulusIdentifier="offline-uuid";class P extends E{static targets=["usernamesBulkInput","bulkOutput","generateBulkButton","clearButton","copyBulkButton","errorMessage","formatRadio","uuidFormatRadio","bulkInputSection","bulkOutputSection","formatSection","uuidFormatSection","resultCount"];static values={outputFormat:{type:String,default:"plain"},uuidFormat:{type:String,default:"dashed"}};connect(){this.setupEventListeners(),this.updateUI()}disconnect(){this.bulkDebounceTimer&&clearTimeout(this.bulkDebounceTimer)}setupEventListeners(){this.hasUsernamesBulkInputTarget&&this.usernamesBulkInputTarget.addEventListener("input",this.onBulkInput.bind(this)),this.bulkDebounceTimer=null}generateOfflineUuid(o){const n="OfflinePlayer:"+o,l=j(n),d=[l.substr(0,8),l.substr(8,4),"3"+l.substr(13,3),(parseInt(l.substr(16,1),16)&3|8).toString(16)+l.substr(17,3),l.substr(20,12)].join("-");return this.uuidFormatValue==="undashed"?d.replace(/-/g,""):d}displayUuid(o){this.uuidOutputTarget.value=o;const n=this.uuidDisplayTarget,l=n.querySelector("div:last-child");l&&(l.textContent=o),n.classList.remove("hidden"),this.copyButtonTarget.disabled=!1}clearAll(){this.usernameInputTarget.value="",this.usernameValue="",this.clearOutput(),this.updateUI(),this.usernameInputTarget.focus()}copyToClipboard(){const o=this.uuidOutputTarget.value;o&&navigator.clipboard.writeText(o).then(()=>{const n=this.copyButtonTarget.innerHTML;this.copyButtonTarget.innerHTML='<i data-lucide="check" class="h-4 w-4"></i>',this.copyButtonTarget.classList.add("text-lime-400"),setTimeout(()=>{this.copyButtonTarget.innerHTML=n,this.copyButtonTarget.classList.remove("text-lime-400")},1500)}).catch(()=>{this.uuidOutputTarget.select(),document.execCommand("copy")})}showError(o){this.errorMessageTarget.textContent=o,this.errorMessageTarget.classList.remove("hidden")}hideError(){this.errorMessageTarget.classList.add("hidden")}updateUI(){const o=this.usernameInputTarget.value.trim().length>0,n=this.uuidOutputTarget.value.length>0;this.generateButtonTarget.disabled=!o,this.clearButtonTarget.disabled=!o&&!n}generate(){this.generateUuid()}clear(){this.clearAll()}copy(){this.copyToClipboard()}toggleInputMode(){const o=this.inputModeRadioTargets.find(n=>n.checked)?.value||"single";this.inputModeValue=o,o==="single"?(this.singleInputSectionTarget.classList.remove("hidden"),this.bulkInputSectionTarget.classList.add("hidden"),this.singleOutputSectionTarget.classList.remove("hidden"),this.bulkOutputSectionTarget.classList.add("hidden"),this.formatSectionTarget.classList.add("hidden"),this.clearAll()):(this.singleInputSectionTarget.classList.add("hidden"),this.bulkInputSectionTarget.classList.remove("hidden"),this.singleOutputSectionTarget.classList.add("hidden"),this.bulkOutputSectionTarget.classList.remove("hidden"),this.formatSectionTarget.classList.remove("hidden"),this.clearAll()),this.updateUI()}onBulkInput(){this.bulkDebounceTimer&&clearTimeout(this.bulkDebounceTimer),this.updateUI(),this.usernamesBulkInputTarget.value.trim().length>0?this.bulkDebounceTimer=setTimeout(()=>{this.generateBulk()},500):this.clearBulkOutput()}updateFormat(){const o=this.formatRadioTargets.find(n=>n.checked)?.value||"plain";this.outputFormatValue=o,this.bulkOutputTarget.value&&this.generateBulk()}updateUuidFormat(){const o=this.uuidFormatRadioTargets.find(n=>n.checked)?.value||"dashed";this.uuidFormatValue=o,this.bulkOutputTarget.value&&this.generateBulk()}generateBulk(){const o=this.usernamesBulkInputTarget.value.trim();if(!o){this.showError("Please enter some usernames");return}const n=o.split(`
`).map(h=>h.trim()).filter(h=>h.length>0);if(n.length===0){this.showError("Please enter valid usernames");return}const l=[],d=[];if(n.forEach((h,g)=>{if(h.length>16){d.push(`Line ${g+1}: "${h}" is too long (max 16 characters)`);return}if(!/^[a-zA-Z0-9_]+$/.test(h)){d.push(`Line ${g+1}: "${h}" contains invalid characters`);return}try{const f=this.generateOfflineUuid(h);l.push({username:h,uuid:f})}catch{d.push(`Line ${g+1}: Failed to generate UUID for "${h}"`)}}),d.length>0){if(this.showError(d.join(`
`)),l.length===0)return}else this.hideError();this.displayBulkResults(l),this.updateResultCount(l.length,n.length)}displayBulkResults(o){const n=this.outputFormatValue;let l="";switch(n){case"json":l=JSON.stringify(o,null,2);break;case"xml":l=this.formatAsXml(o);break;case"csv":l=this.formatAsCsv(o);break;case"plain":default:l=o.map(d=>`${d.username}: ${d.uuid}`).join(`
`);break}this.bulkOutputTarget.value=l,this.copyBulkButtonTarget.disabled=!1}formatAsXml(o){let n=`<?xml version="1.0" encoding="UTF-8"?>
<uuids>
`;return o.forEach(l=>{n+=`  <player>
`,n+=`    <username>${this.escapeXml(l.username)}</username>
`,n+=`    <uuid>${l.uuid}</uuid>
`,n+=`  </player>
`}),n+="</uuids>",n}formatAsCsv(o){let n=`username,uuid
`;return o.forEach(l=>{const d=l.username.includes(",")?`"${l.username.replace(/"/g,'""')}"`:l.username;n+=`${d},${l.uuid}
`}),n}escapeXml(o){return o.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}updateResultCount(o,n){const l=n-o;let d=`Generated ${o} UUID${o!==1?"s":""}`;l>0&&(d+=` (${l} error${l!==1?"s":""})`),d+=` from ${n} username${n!==1?"s":""}`,this.resultCountTarget.textContent=d}copyBulk(){const o=this.bulkOutputTarget.value;o&&navigator.clipboard.writeText(o).then(()=>{const n=this.copyBulkButtonTarget.innerHTML;this.copyBulkButtonTarget.innerHTML='<i data-lucide="check" class="h-3 w-3"></i><span>Copied!</span>',this.copyBulkButtonTarget.classList.add("text-lime-400"),setTimeout(()=>{this.copyBulkButtonTarget.innerHTML=n,this.copyBulkButtonTarget.classList.remove("text-lime-400")},1500)}).catch(()=>{this.bulkOutputTarget.select(),document.execCommand("copy")})}clearAll(){this.hasUsernamesBulkInputTarget&&(this.usernamesBulkInputTarget.value=""),this.clearBulkOutput(),this.updateUI(),this.hasUsernamesBulkInputTarget&&this.usernamesBulkInputTarget.focus()}clearBulkOutput(){this.hasBulkOutputTarget&&(this.bulkOutputTarget.value="",this.copyBulkButtonTarget.disabled=!0),this.hasResultCountTarget&&(this.resultCountTarget.textContent=""),this.hideError()}updateUI(){const o=this.usernamesBulkInputTarget.value.trim().length>0,n=this.bulkOutputTarget.value.length>0;this.generateBulkButtonTarget.disabled=!o,this.clearButtonTarget.disabled=!o&&!n}}export{P as default};
